<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartPay - Invoice Pembayaran</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-50">

    <!-- Navbar -->
    <nav class="bg-white shadow-sm border-b border-slate-200">
        <div class="max-w-2xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold">SP</div>
                <span class="text-lg font-bold text-slate-900">SmartPay</span>
            </div>
            <a href="products.html" class="text-slate-600 hover:text-slate-900 transition">‚Üê Kembali</a>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-2xl mx-auto px-6 py-8">

        <h1 class="text-3xl font-bold text-slate-900 mb-2">Invoice Pembayaran</h1>
        <p class="text-slate-600 mb-8">Verifikasi detail pembayaran Anda sebelum melanjutkan</p>

        <!-- Card -->
        <div class="bg-white rounded-2xl shadow p-8 mb-6">

            <p class="text-sm text-slate-600 mb-1">ID Transaksi</p>
            <p id="trxId" class="text-xl font-bold text-slate-900 mb-6">Loading...</p>

            <div class="border-b border-slate-200 pb-6 mb-6">
                <p class="text-sm text-slate-600">Produk</p>
                <p id="product" class="text-lg font-semibold">-</p>

                <p class="text-sm text-slate-600 mt-4">Nominal</p>
                <p id="amount" class="text-lg font-semibold">-</p>
            </div>

            <div class="border-b border-slate-200 pb-6 mb-6">
                <p class="text-sm text-slate-600">Nomor Tujuan</p>
                <p id="account" class="font-semibold">-</p>
            </div>

            <div class="border-b border-slate-200 pb-6 mb-6">
                <p class="text-sm text-slate-600">Biaya Admin</p>
                <p id="adminFee" class="font-semibold">-</p>
            </div>

            <div class="flex justify-between items-center">
                <p class="text-lg font-bold">Total Pembayaran</p>
                <p id="total" class="text-2xl font-bold text-blue-600">-</p>
            </div>
        </div>

        <!-- Actions -->
        <div class="flex gap-4">
            <a href="products.html"
                class="flex-1 px-6 py-3 border-2 border-slate-300 text-slate-700 font-semibold rounded-xl hover:bg-slate-100 transition text-center">
                Batal
            </a>

            <a href="success.html"
                class="flex-1 px-6 py-3 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 transition text-center">
                Konfirmasi Pembayaran
            </a>
        </div>
    </div>

    <script src="/eel.js"></script>

    <script>
        async function loadInvoice() {
            const params = new URLSearchParams(window.location.search);
            const trxId = params.get("id");

            const trx = await eel.get_transaction(parseInt(trxId))();

            if (!trx) {
                document.body.innerHTML = "<h1 class='text-center text-2xl mt-20'>Transaksi tidak ditemukan!</h1>";
                return;
            }

            document.getElementById("trxId").innerText = "TRX" + trx.id;
            document.getElementById("product").innerText = trx.product;
            document.getElementById("account").innerText = trx.account_number;
            document.getElementById("amount").innerText = "Rp " + trx.amount.toLocaleString('id-ID');
            document.getElementById("adminFee").innerText = "Rp " + trx.admin_fee.toLocaleString('id-ID');
            document.getElementById("total").innerText = "Rp " + trx.total.toLocaleString('id-ID');
        }

        window.onload = loadInvoice;
    </script>

</body>
</html>
